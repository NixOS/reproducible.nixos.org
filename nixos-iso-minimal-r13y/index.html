<html>
<head>
<title>Is nixos.iso_minimal.x86_64-linux reproducible?</title>
<meta name="description" content="nixos-unstable's nixos.iso_minimal.x86_64-linux build is 95.93% reproducible!" />

<!-- Twitter Card data -->
<meta name="twitter:card" value="summary">

<!-- Open Graph data -->
<meta property="og:title" content="Is nixos.iso_minimal.x86_64-linux Reproducible?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://reproducible.nixos.org/" />
<meta property="og:image" content="https://nixos.org/logo/nixos-logo-only-hires.png" />
<meta property="og:description" content="nixos-unstable's nixos.iso_minimal.x86_64-linux build is 95.93% reproducible!" />
<link rel="stylesheet" href="../styles/index.css">
<style>
body {
      padding: 3em;
}
</style>
</head>
<body>
<h1>Is nixos.iso_minimal.x86_64-linux Reproducible?</h1>
<i>Tracking: <code>nixos-unstable</code>'s
    <code>nixos.iso_minimal.x86_64-linux</code> job for <code>x86_64-linux</code>.</i>
<!--p>Build via:</p>
<pre>
git clone https://github.com/nixos/nixpkgs.git
cd nixpkgs
git checkout 645bc49f34fa8eff95479f0345ff57e55b53437e
nix-build ./nixos/release-combined.nix -A nixos.nixos.iso_minimal.x86_64-linux
</pre-->

<h2>1884 out of 1964 (95.93%)</h2>
<p>paths in the nixos.iso_minimal.x86_64-linux build closure are reproducible! 74 paths remained unchecked</p>
<h3>unreproduced paths</h3>
<p>These derivations produced a different result compared to the official cache, revealing a reproducibility problem. See the <a href="https://github.com/orgs/NixOS/projects/30/views/1">Project</a> for progress on fixing those, or <a href="https://github.com/NixOS/nixpkgs/issues/new?assignees=&labels=0.kind%3A+enhancement%2C6.topic%3A+reproducible+builds&template=unreproducible_package.md&title=">add an issue</a> for those that are not tracked yet.</p>
<ul>
<li><code>/nix/store/7wr4fdldas7f7mhkc9sc78gp1k70kvzl-python3.10-bootstrapped-pip-23.0.1.drv</code></li>
<li><a href="./diff/b4af05424ee12350d53b4e4e723c7d4473a54c2266a4371b7a48784670f4f24a-312ba2e00c6f5180f2eae18989ffe735d88ff29070d04012e68826eb617c3eaf.html">(diffoscope)</a> out</li>
</ul></li>
<li><code>/nix/store/2c90ffkrq6hlqsngarsdbnvns391xsk9-terminus-font-4.49.1.drv</code></li>
<li><a href="./diff/c61a88970ef589bbff4b644a66dcdc331945f214b257b583fc8ca750aa105481-85f30fa4169bb2563bc8d09d5167c05c58ff635f1168c41c473fa682d59ed887.html">(diffoscope)</a> out</li>
</ul></li>
<li><code>/nix/store/0hkhpqfcr91njchdajl1b2wxzjjzaaip-grub-2.06.drv</code></li>
<li><a href="./diff/60b8506385a796453830c8ae355f24610faacc661c5762ec52309d3c2817198c-3d4b854cf14530abd128a9abc6921537f10433bfdbdde30b3587ce8e0dae8e26.html">(diffoscope)</a> debug</li>
</ul></li>
<li><code>/nix/store/qa4p4k2p8g6v4y1r8nsqb6j4p52bq0rl-zfs-kernel-2.1.9-6.1.24.drv</code></li>
<li><a href="./diff/de9b68b8b796081cfa72bfe65347f86ba5920900e2772e99858518548556e662-4bd106f3fc03aa56e28c8d311ebfa67725a74a360cd5c29e4a9e3fe098bb8a7c.html">(diffoscope)</a> out</li>
</ul></li>
<li><code>/nix/store/irgv7494gmj42bx10qwg9al7n60y9dg3-python3.10-bootstrapped-pip-23.0.1.drv</code></li>
<li><a href="./diff/3b5654f23e585dcf0e40f54ef87ad5c6241e247756783cf56c7c56937b327247-116f4b7dc4c0903c31474f4d7733c8f0cbd3dfbbe08d4c86eef3dcd259c9c7f4.html">(diffoscope)</a> out</li>
</ul></li>
<li><code>/nix/store/2fv8vyr60xgpg7wv3bj69s43qx4g2pkp-vim-9.0.1441.drv</code></li>
<li><a href="./diff/bc0e9b9f9d738d251da968a18b73dabbc480192f9dd879c81620cbd49b3f2d9c-a078b92d52fa0f7c283d14a0602977947c7ae7ddda02f07b0999e5d50d9c58c7.html">(diffoscope)</a> out</li>
</ul></li>
</ul>
<hr>
<h3>unchecked paths</h3>
<ul>
<li><code>/nix/store/8gzvc0dfz8sd7x6a5da376fp27ghfwch-bootstrap-stage0-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/8gzvc0dfz8sd7x6a5da376fp27ghfwch-bootstrap-stage0-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/4kghmphw5cgn9azmb1jlf1r9a09y1b17-bootstrap-stage1-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/mkihjxqy1sjb2kvzrm3isv40wrwz11fy-bootstrap-stage-xgcc-gcc-wrapper-.drv</code> (skipped)</li>
<li><code>/nix/store/s7j0licwkdn4vpmsx7lr79is7hryyazk-bootstrap-stage-xgcc-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/izpq1l3cni0a7kriq4wbgc24acb2ssrm-bootstrap-stage-xgcc-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/8svqs8bpwaf3iplkvrci4zilrsd2zxpr-xgcc-12.2.0.drv</code> (skipped)</li>
<li><code>/nix/store/af40hf3nd3a3af5jgcp83xw24kf4nzgn-bootstrap-stage2-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/mhrsqnj1v1wlpv4p4wf1hsgd2pw30w0h-bootstrap-stage2-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/1zpsgbsjy7spp9b2y1gmycp0yvq6mp59-linux-6.2.tar.xz.drv</code> (skipped)</li>
<li><code>/nix/store/igqgyxpdv374j9qnbm7fs0i8sdv45hx5-linux-headers-6.2.drv</code> (skipped)</li>
<li><code>/nix/store/0sbl3c9cdy0j91zl2c7qyd2wcb094f8k-bootstrap-stage3-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/ijma60vp12ljnbb23qfhz223wnap4dyx-bootstrap-stage3-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/a50rysasgycikcsy2gpk3l9zxl31zrp4-bootstrap-stage4-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/cdkwjfvi8kfvv6igrcy3namcy09vk7mz-bootstrap-stage4-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/70mzivwc9zl1p41qp6dm8aac81achxip-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/w184rg11rf6ridzdxhq6w9jm70706wf0-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/py1pdcfhj845cyam6ndq0b2mh02zk4my-openssl-3.0.8.tar.gz.drv</code> (skipped)</li>
<li><code>/nix/store/fhhzkh1k6pk17axgsbqz5rhszmq1wll7-openssl-3.0.8.drv</code> (skipped)</li>
<li><code>/nix/store/fqddnai30ibvl619qwvrjpglqgrdx5k2-linux-6.2.tar.xz.drv</code> (skipped)</li>
<li><code>/nix/store/y7r25rfh5pg2hr7cw9lah8jyl283h2m4-linux-headers-6.2.drv</code> (skipped)</li>
<li><code>/nix/store/s2ris01q1p8b9pxys0mdbzx5lw0bjhp4-openssl-3.0.8.tar.gz.drv</code> (skipped)</li>
<li><code>/nix/store/7jcqqqsd2ma84l46wzgd4pxbrkrz91jc-openssl-3.0.8.drv</code> (skipped)</li>
<li><code>/nix/store/j2v2hs7cs8yhjy6l802hnan7khgv1mhq-linux-pam-1.5.2.drv</code> (skipped)</li>
<li><code>/nix/store/mbw46idlsjk79gx4w91kv7q1sqjx9rzh-openssl-3.0.8.drv</code> (skipped)</li>
<li><code>/nix/store/ph3g66dfv8vl07yj9svivnndv6jqbf50-util-linux-2.38.1.tar.xz.drv</code> (skipped)</li>
<li><code>/nix/store/77y9xsfrqm1i18f1kdb1vzpqnp2x6j70-util-linux-minimal-2.38.1.drv</code> (skipped)</li>
<li><code>/nix/store/43i81v3a5va3rzdjgrf3fpm7zjr8yriv-clang-11.1.0.src.tar.xz.drv</code> (skipped)</li>
<li><code>/nix/store/ihrgnzkwiiw2n3kxda9vslg4mrvv60s0-llvm-11.1.0.src.tar.xz.drv</code> (skipped)</li>
<li><code>/nix/store/ks107i7zfjv5xavsya5a5bvkibndpmns-llvm-11.1.0.drv</code> (skipped)</li>
<li><code>/nix/store/cjyl7iz6vc2i09pbi40h20qyscyr37bx-clang-11-12-LLVMgold-path.patch.drv</code> (skipped)</li>
<li><code>/nix/store/j4niiwv90zycqfc4wyz5h68xbz6ydsn1-clang-tools-extra-11.1.0.src.tar.xz.drv</code> (skipped)</li>
<li><code>/nix/store/7xxf2vhnqyizry96a8l12469jy33wf87-clang-11.1.0.drv</code> (skipped)</li>
<li><code>/nix/store/c14skg6gra63bccx9g0nfax26a7rl1hw-clang-wrapper-11.1.0.drv</code> (skipped)</li>
<li><code>/nix/store/cbxrmzxc0gygxbd03wjvyhljlpqq9b1f-util-linux-2.38.1.drv</code> (skipped)</li>
<li><code>/nix/store/2n1dsz81pcjd7nb6g7x382q2mcqjnvc1-rust-1.67.1-x86_64-unknown-linux-gnu.tar.gz.drv</code> (skipped)</li>
<li><code>/nix/store/s7h27mpqrccjgnvc1iys88bb2zr297y8-llvm-src-15.0.7.drv</code> (skipped)</li>
<li><code>/nix/store/x62y6nyn2faywyk35ickas2vyy2r950v-llvm-15.0.7.drv</code> (skipped)</li>
<li><code>/nix/store/ilmh8dxfh1hysy2m3hampsjgkj8qlc0x-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/lpyxrrg1vfib5p7gq8rfq985p5jixmig-linux-headers-static-6.2.drv</code> (skipped)</li>
<li><code>/nix/store/1n09ns0cdwxv8gla312pdda7xq17bwvv-x86_64-unknown-linux-musl-binutils-2.40.drv</code> (skipped)</li>
<li><code>/nix/store/5ja3pggbcjzgxmf4kxcm41jzfhcv68kw-x86_64-unknown-linux-musl-binutils-wrapper-2.40.drv</code> (skipped)</li>
<li><code>/nix/store/9jb7kcpzr4kvdfbk1r01q33zav6qm2d7-x86_64-unknown-linux-musl-stage-static-gcc-12.2.0.drv</code> (skipped)</li>
<li><code>/nix/store/795a7gs444dd2lh9caqm9vhdg2hnsmhs-x86_64-unknown-linux-musl-stage-static-gcc-wrapper-12.2.0.drv</code> (skipped)</li>
<li><code>/nix/store/ygx3p65hkigiljs0v59g1d32ns68hhaa-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/n2iz343y2p2lr91sv36nd8bl84qj9by7-musl-static-x86_64-unknown-linux-musl-1.2.3.drv</code> (skipped)</li>
<li><code>/nix/store/v26aildwmixg3sw0fd0wp926lpbddmac-x86_64-unknown-linux-musl-binutils-wrapper-2.40.drv</code> (skipped)</li>
<li><code>/nix/store/7n2gi5ibr1slakk9jm4j45lr914gyh84-x86_64-unknown-linux-musl-stage-final-gcc-12.2.0.drv</code> (skipped)</li>
<li><code>/nix/store/yqgsmim4vwqnwgf2c7ksyrk4ln7xzsj8-x86_64-unknown-linux-musl-stage-final-gcc-wrapper-12.2.0.drv</code> (skipped)</li>
<li><code>/nix/store/llgdn89mnsvk2kkxwrcq2xvn2cmjwhr9-stdenv-linux.drv</code> (skipped)</li>
<li><code>/nix/store/lsywxwc87hm9ff3r4mgx3cd0q964jas3-busybox-static-x86_64-unknown-linux-musl-1.36.0.drv</code> (skipped)</li>
<li><code>/nix/store/49zaad58y2pwxqif2cym7bnjzrs63mz8-openssh-9.3p1.tar.gz.drv</code> (skipped)</li>
<li><code>/nix/store/3x7dvrp2qf2xl0sdvgn2r1jvv4090d5m-openssh-9.3p1.drv</code> (skipped)</li>
<li><code>/nix/store/33r3wvd98m3hfkk32avmnsyqcsmgzrg8-libselinux-3.3.tar.gz.drv</code> (skipped)</li>
<li><code>/nix/store/720brbip1jkxrcr2i1dddwdvfx8065k5-libselinux-3.3.drv</code> (skipped)</li>
<li><code>/nix/store/ad13d93cgqp5jnp70mics9wpkclzwfy9-mount-util-linux-2.38.1.drv</code> (skipped)</li>
<li><code>/nix/store/b8mcqaiqlzjqp0qy4mfx4rfwmbf2135l-syslinux-b404870.drv</code> (skipped)</li>
<li><code>/nix/store/dl44k9zrkv63mi5krp6x4m535g1ic3f8-syslinux-unstable-2019-02-07.drv</code> (skipped)</li>
<li><code>/nix/store/p2k8ffi7v1c661hg1qghwsmdqzrz82wc-openssl-3.0.8.drv</code> (skipped)</li>
<li><code>/nix/store/zmmswg76zm3q36lg4v6kmpp6pv7lv71j-linux-firmware-20230310.drv</code> (skipped)</li>
<li><code>/nix/store/czsys7399aj1sjqpv2b9ihh70m90ajg2-linux-firmware-20230310-xz.drv</code> (skipped)</li>
<li><code>/nix/store/rgcrjhfq4crl621fl9kw2klb2y00j99m-linux-6.1.24.tar.xz.drv</code> (skipped)</li>
<li><code>/nix/store/hv2082dxl4a7dalpka8iplk0ib1w89cy-linux-config-6.1.24.drv</code> (skipped)</li>
<li><code>/nix/store/rzvard28gmggk56pn7a5zp6pclm4ipkn-linux-6.1.24.drv</code> (skipped)</li>
<li><code>/nix/store/inghadrk33rsz25kzrmnv7d8f9580d7w-linux-6.1.24-modules.drv</code> (skipped)</li>
<li><code>/nix/store/8wba69xdnyxsaknhlljk5hk7rf25ykvw-linux-6.1.24-modules-shrunk.drv</code> (skipped)</li>
<li><code>/nix/store/7majkv25q1n8i26z1nan9kiwga813ykh-initrd-linux-6.1.24.drv</code> (skipped)</li>
<li><code>/nix/store/v00my5ng4id1lzli5q02vrklwfi5bdzn-isolinux.cfg-in.drv</code> (skipped)</li>
<li><code>/nix/store/5ajgi32canfc3zwr37q5k6kir1rj6dim-isolinux.cfg.drv</code> (skipped)</li>
<li><code>/nix/store/q45fhxryps2wzb1f0mcwbfzprksvf3n4-nixos-minimal-23.05pre56789.gfedcba-x86_64-linux.iso.drv</code> (skipped)</li>
<li><code>/nix/store/rfyw7473g7kl43xi3l59iwbzf7lnj554-testdisk-7.1.tar.bz2.drv</code></li>
<li><code>/nix/store/lw9vfdwdxj9f7yv4654vv2xs1nlb7j49-CVE-2021-3695.CVE-2021-3696.CVE-2021-3697.CVE-2022-28733.CVE-2022-28734.CVE-2022-28735.CVE-2022-28736.CVE-2022-28737.15.patch.drv</code></li>
<li><code>/nix/store/hcgb17zvdm4fj9vhdp3gi4b9b2vi6rix-openresolv-3.12.0.tar.xz.drv</code></li>
<li><code>/nix/store/xl0446l3fik97ghmbfijr3hhnx0xcyrb-dhcpcd-9.4.1.tar.xz.drv</code></li>
</ul>

<hr />
<h3 id="test-circumstance">How are these tested?</h3>
<p>Each build is run twice, at different times, on different hardware

running different kernels.</p>

<h3 id="result-confidence">How confident can we be in the results?</h3>

<p>Fairly. We don't currently inject randomness at the filesystem
layer, but many of the reproducibility issues are being exercised
already. It isn't possible to <em>guarantee</em> a package is
reproducible, just like it isn't possible to prove software is
bug-free. It is possible there is nondeterminism in a package source,
waiting for some specific circumstance.</p>

<p>This is why we run these tests: to track how we are doing over
time, to submit bug fixes for nondeterminism when we find them.</p>

<h3 id="help">How can I help?</h3>

<ul>
<li>Look at the <a href="https://github.com/orgs/NixOS/projects/30">project page</a>, <a href="https://github.com/NixOS/nixpkgs/issues?q=is%3Aopen+is%3Aissue+label%3A%226.topic%3A+reproducible+builds%22">issues</a> and <a href="https://github.com/NixOS/nixpkgs/pulls?q=is%3Aopen+is%3Apr+label%3A%226.topic%3A+reproducible+builds%22">pull requests</a> with the 'reproducible builds' label.</li>
<li>Open new issues/PR's for reproducibility problems (like the ones reported above)</li>
<li>Join the <a href="https://matrix.to/#/#reproducible-builds:nixos.org">#reproducible-builds:nixos.org</a> room on Matrix</li>
</ul>

<h3 id="next-steps">How can we do better?</h3>

<p>There are further steps we could take. For example, the next likely
step is using
<a href="https://salsa.debian.org/reproducible-builds/disorderfs">disorderfs</a>
which injects additional nondeterminism by reordering directory entries.
</p>

<h3 id="how-do-i-check">How can I test my patches?</h3>
<p>Nix has built-in support for checking a path is reproducible. There
are two routes.</p>

<p>Pretending you are debugging a nondeterminism bug in
<code>hello</code>. To check it, you build the package, and then
build it again with <code>--check --keep-failed</code>. This will
provide the differing output in a separate directory which you can
use <code>diffoscope</code> on.</p>

<pre>
$ nix-build . -A hello
$ nix-build . -A hello --check --keep-failed
[...snip...]
error: derivation '/nix/store/...hello.drv' may not be deterministic:
output '/nix/store/...-hello' differs from '/nix/store/...hello.check'
$ diffoscope /nix/store/...hello /nix/store/...hello.check
</pre>

<p>Note: the <code>.check</code> output is not a valid store path, and
will automatically be deleted on the next run of the Nix garbage
collector.</p>

<p><small>There is support for an automatic <code>diff-hook</code> in
Nix 2, but it is much more complicated to set up. If you would like to
work on this, or need help setting it up,
<a href="https://matrix.to/#/!LemuOOvbWqRXodtSsw:nixos.org?via=nixos.org&via=matrix.org">contact us on Matrix.</a>
We can work together to write docs on how to use it.</small>
</p>

<hr />

<small>Generated at 2023-04-23 11:31:39.831944342 UTC from <a href="https://codeberg.org/raboof/nix-reproducible-builds-report">https://codeberg.org/raboof/nix-reproducible-builds-report</a> (heavily based on <a href="https://github.com/grahamc/r13y.com">https://github.com/grahamc/r13y.com</a>).</small>
<center><img style="max-width: 100px" src="https://nixos.org/logo/nixos-logo-only-hires.png" /></center>
</body></html>
